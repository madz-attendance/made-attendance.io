<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MADZ Attendance | Professor Account</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="icon" href="./images/madz-tab-icon.png" type="image/x-icon">
</head>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.43.4/dist/umd/supabase.min.js"></script>

<script src="supabaseInit.js"></script>
<body>
	<!-- The header is a bounding box (header-master-box) filled with columns (header-col) -->
	<div class="header-master-box" id="header-master-box-PROFESSOR">
		<div class="header-col" id="header-col1-madz-logo">
			<img id="madz_logo" src="/images/madz_attendance_logo_inverted.png" class="madz-logo-v2">
		</div>
		<div class="header-col" id="header-col2-left-gap-PROFESSOR">
		
		</div>
		<div class="header-col" id="header-col3-tab-buttons-PROFESSOR">
			<div class="header-col-sub" id="header-col-buttons">
				<div class="header-button" id="welcome_button_PROFESSOR" onclick="openTab('welcomeTab')">
					Welcome
				</div>
				<div class="header-button" id="classes_button_PROFESSOR" onclick="openTab('classesTab')">
					Classes
				</div>
				<div class="header-button" id="create_course_button_PROFESSOR" onclick="openTab('create_course')">
					Create<br>Course
				</div>
				<div class="header-button" id="add_student_button_PROFESSOR" onclick="openTab('newStudent')" title="New Student">
    				Roster<br>Entry
				</div>
				<div class="header-button" id="remove_student_button_PROFESSOR" onclick="openTab('removeStudent')" title="Remove Student">
					Roster<br>Removal
				</div>
			</div>
		</div>
		<div class="header-col" id="header-col4-right-gap-PROFESSOR">
		
		</div>
		<div class="header-col" id="header-col5-extra-buttons-PROFESSOR">
			<div class="header-col-sub" id="header-col-extra-buttons-PROFESSOR">
			
				<div class="header-button" id="help_button_PROFESSOR" onclick="openTab('helpTab')" title="Help">
					<span class="material-symbols-outlined">
						help
					</span>
				</div>
				<div class="header-button" id="account_button_PROFESSOR" onclick="openTab('accountTab')" title="Account Info">
					<span class="material-symbols-outlined">
						account_circle
					</span>
				</div>
				<div class="header-button" id="notification_button_PROFESSOR" onclick="openTab('notificationTab')" title="Notifications">
					<span class="material-symbols-outlined">
						notifications
					</span>
				</div>
				<div class="header-button" id="log_out_button_PROFESSOR" onclick="logOut()" title="Log Out">
					<span class="material-symbols-outlined">
						logout
					</span>
				</div>
			</div>
		</div>
	</div>
	
    <!-- Main Content Area -->
    <main>
        <!-- Welcome Tab Content -->
        <section id="welcomeTab" class="tab-content">
            <div class="account-container">
                <h2 id="welcomeMessage">Welcome,</h2>
                <div class="user-info">
                    <p><strong>Rank:</strong> <span id="facRank"></span></p>
                    <p><strong>Last Name:</strong> <span id="facLastName"></span></p>
                </div>
            </div>
        </section>

        <!-- Classes Tab Content -->
        <section id="classesTab" class="tab-content">
            <div id="form-section" class="account-containertwo">
                <h2>Choose a Semester and Course Code</h2>
				<div>
					<label for="semesterDropdown">Semester:<span class="required"></span></label>
					<select id="semesterDropdown" name="options"></select>
				</div>
				<div>
					<label for="courseDropdown">Course:<span class="required"></span></label>
					<select id="courseDropdown" name="options"></select>
				</div>
				<div id="semesterButtonContainer">
					<div class="classes_page_button" id="classes_page_button_1">
						<button id="semesterSubmit">Get Attendance Data</button>
					</div>
					<div class="classes_page_button" id="classes_page_button_1">
						<button id="fetchRosterButton"> Fetch Roster </button>
					</div>
				</div>
   			</div>

			<!-- Roster Table Section (Initially Hidden) --> 
			<div id="rosterTableSection" style="display: none;">
    				<h2 id="rosterHeader">Class Roster</h2>
    				<table id="roster-table" style="width:100%; border-collapse: collapse; border: 2px solid black;">
      			  <thead>
				  
      			  </thead>
      		  <tbody>
            <!-- Rows will be dynamically generated here -->
      		  </tbody>
	    	</table>
				<!-- Stolen button from david's code --> 
					<button id="rosterBackButton">Go Back</button>
			</div>

			<!-- Attendance Table Section (Initially Hidden) -->
			<div id="table-section" style="display: none;">
				<h2>Attendance Information</h2>
				<table id="attendance-table">
					<thead>
						<tr>
							<th id="tabLast">LastName</th>
							<th id="tabFirst">FirstName</th>
							<th id="tabStuID">Student ID</th>
							<th id="tabAtt">Attended?</th>
						</tr>
					</thead>
					<tbody>
						<!-- Rows will be dynamically generated here -->
					</tbody>
				</table>
				<div id="backButtonContainer">
					<button id="backButton">Back to Calendar</button>
					<button id="semBackButton">Semester/Course Selection</button>
				</div>
			</div>
			
			<div id="calendar-section" style="display: none;">
				<h2>Choose Day to View Attendance</h2>
				<div class="calendar-container">
				<header class="calendar-header">
					<p class="calendar-current-date"></p>
					<div class="calendar-navigation">
						<span id="calendar-prev" class="material-symbols-rounded"> < </span>
						<span id="calendar-next" class="material-symbols-rounded"> > </span>
					</div>
				</header>
		
				<div class="calendar-body">
					<ul class="calendar-weekdays">
						<li>Sun</li>
						<li>Mon</li>
						<li>Tue</li>
						<li>Wed</li>
						<li>Thu</li>
						<li>Fri</li>
						<li>Sat</li>
					</ul>
					<ul class="calendar-dates"></ul>
				</div>
				</div>
				<div id="calendarBackContainer">
					<button id="calendarBackButton">Go Back</button>
				</div>
			</div>
			
		</section>

<!-- Create Course Tab Content -->
<!-- Note: The dropdown menu options must not be "none", but instead "", or else the validity check in createCourse() won't work. It will count "none" as a valid value. -->
<section id="create_course" class="tab-content">
	<div class="account-container">
		<h2>Create Course</h2>
		<h4>All fields are required.</h4>
		<div class="cc-input-master-container">
			<form class = "cc-form" id="course_creation_form_PROFESSOR">
				<!-- Department Dropdown -->
				<div class="cc-input-container" id="cc_dept_prompt">
					Department:
				</div>
				<div class="cc-input-container" id="cc_dept_dropdown_container">
					<select id="course_creation_department_dropdown" name="options" required>
						<option value=""></option>
					</select>
				</div>
				<!-- Semester Dropdown -->
				<div class="cc-input-container" id="cc_sem_prompt">
					Semester:
				</div>
				<div class="cc-input-container" id="cc_sem_dropdown_container">
					<select id="course_creation_semester_dropdown" name="options" required>
						<option value=""></option>
					</select>
				</div>
				<!-- Course Number -->
				<div class="cc-input-container" id="cc_coursenum_prompt">
					Course Number:
				</div>
				<div class="cc-input-container" id="cc_coursenum_container">
					<input type="number" id="cc_coursenum_input" name="cc_coursenum_input" required>
				</div>
				<!-- Course Name -->
				<div class="cc-input-container" id="cc_coursename_prompt">
					Course Name:
				</div>
				<div class="cc-input-container" id="cc_coursename_container">
					<input type="text" id="cc_coursename_input" name="cc_coursename_input" required>
				</div>
				<!-- Section -->
				<div class="cc-input-container" id="cc_coursesection_prompt">
					Section:
				</div>
				<div class="cc-input-container" id="cc_coursesection_container">
					<input type="text" id="cc_coursesection_input" name="cc_coursesection_input" required>
				</div>
				<!-- Building Dropdown -->
				<div class="cc-input-container" id="cc_building_prompt">
					Building:
				</div>
				<div class="cc-input-container" id="cc_building_dropdown_container">
					<select id="course_creation_building_dropdown" name="options" required>
						<option value=""></option>
					</select>
				</div>
				<!-- Room -->
				<div class="cc-input-container" id="cc_courseroom_prompt">
					Room Number:
				</div>
				<div class="cc-input-container" id="cc_courseroom_container">
					<input type="text" id="cc_courseroom_input" name="cc_courseroom_input" required>
				</div>
				<!-- Days -->
				<div class="cc-input-container" id="cc_coursedays_prompt">
					Days:
				</div>
				<div class="cc-input-container" id="cc_coursedays_container">
					<div class="days-of-week">
						<div class="day"> <label for="monday">M</label> <input type="checkbox" id="monday" name="days" value="M"> </div>
						<div class="day"> <label for="tuesday">Tu</label> <input type="checkbox" id="tuesday" name="days" value="Tu"> </div>
						<div class="day"> <label for="wednesday">W</label> <input type="checkbox" id="wednesday" name="days" value="W"> </div>
						<div class="day"> <label for="thursday">Th</label> <input type="checkbox" id="thursday" name="days" value="Th"> </div>
						<div class="day"> <label for="friday">F</label> <input type="checkbox" id="friday" name="days" value="F"> </div>
						<div class="day"> <label for="saturday">Sa</label> <input type="checkbox" id="saturday" name="days" value="Sa"> </div>
						<div class="day"> <label for="sunday">Su</label> <input type="checkbox" id="sunday" name="days" value="Su"> </div>
					</div>
				</div>
				<!-- Start Time. NOTE: Takes it as 12-hour time but seems to automatically convert it to military time in javascript -->
				<div class="cc-input-container" id="cc_start_time_prompt">
					Start Time:
				</div>
				<div class="cc-input-container" id="cc_start_time_container">
					<input type="time" id="cc_start_time_input" name="cc_start_time_input" required>
				</div>
				<!-- End Time. NOTE: Takes it as 12-hour time but seems to automatically convert it to military time in javascript -->
				<div class="cc-input-container" id="cc_end_time_prompt">
					End Time:
				</div>
				<div class="cc-input-container" id="cc_end_time_container">
					<input type="time" id="cc_end_time_input" name="cc_end_time_input" required>
				</div>
				<!-- Professor -->
				<div class="cc-input-container" id="cc_prof_prompt">
					Professor:
				</div>
				<div class="cc-input-container" id="cc_prof_dropdown_container">
					<select id="course_creation_professor_dropdown" name="options" required>
						<option value=""></option>
					</select>
				</div>
				<!-- Empty space between professor input and buttons -->
				<div class="cc-input-container" id="cc_empty_space_left">
					&nbsp;
				</div>
				<div class="cc-input-container" id="cc_empty_space_right">
					&nbsp;
				</div>
				<!-- Submit Button and Clear Button -->
				<div class="cc-input-container" id="cc_submit_button">
					<input type="submit" value="Submit" onclick="createCourse(event)">
				</div>
				<div class="cc-input-container" id="cc_clear_button">
					<input type="reset" value="Clear">
				</div>
			</form>
		</div>
		<div class="manual_submission_feedback_container" id="create_course_manual_submission_feedback_container">
		
		</div>
	</div>

</section>



<!-- New Student / Roster Entry Tab Content -->
<section id="newStudent" class="tab-content">
	<div class="account-container">
		<h2>Manually Add Student Into Roster</h2>
		<h4>All fields are required.</h4>
		<div class="ns-input-master-container">
			<form class = "ns-form" id="student_creation_form">
				<!-- Student ID Number -->
				<div class="ns-input-container" id="ns_stuid_prompt">
					Student ID:
				</div>
				<div class="ns-input-container" id="ns_stuid_container">
					<input type="text" id="id_num" name="id_num" required>
				</div>
				<!-- Student First Name -->
				<div class="ns-input-container" id="ns_firstname_prompt">
					First Name:
				</div>
				<div class="ns-input-container" id="ns_firstname_container">
					<input type="text" id="first_name" name="first_name" required>
				</div>
				<!-- Student Last Name -->
				<div class="ns-input-container" id="ns_lastname_prompt">
					Last Name:
				</div>
				<div class="ns-input-container" id="ns_lastname_container">
					<input type="text" id="last_name" name="last_name" required>
				</div>
				<!-- Department Dropdown -->
				<div class="ns-input-container" id="ns_dept_prompt">
					Select a Department:
				</div>
				<div class="ns-input-container" id="ns_dept_dropdown_container">
					<select id="new_student_department_dropdown" name="options" required>
						<option value="none"></option>
					</select>
				</div>
				<!-- Semester Dropdown -->
				<div class="ns-input-container" id="ns_sem_prompt">
					Select a Semester:
				</div>
				<div class="ns-input-container" id="ns_sem_dropdown_container">
					<select id="new_student_semester_dropdown" name="options">
							<option value="none">Any</option>
					</select>
				</div>
				<!-- Course Dropdown -->
				<div class="ns-input-container" id="ns_course_propt">
					Select a Course:
				</div>
				<div class="ns-input-container" id="ns_course_dropdown_container">
					<select id="new_student_courses_dropdown" name="options" required>
							<option value="none">Any</option>
					</select>
				</div>
				<!-- Submit Button -->
				<div class="ns-input-container" id="ns_submit_button">
					<input type="submit" value="Submit" onclick="addStudentToRoster(event)">
				</div>
				<!-- Clear Button -->
				<div class="ns-input-container" id="ns_clear_button">
					<input type="reset" value="Clear">
				</div>
			</form>
		</div>
		<div class="manual_submission_feedback_container" id="new_student_manual_submission_feedback_container">
		
		</div>
		<h2>Upload Students Into Rosters</h2>
		<p>
			Upload a .txt or .csv file containing student information. More info on the <a href="javascript:void(0);" onclick="openTab('helpTab')"><i>Help</i></a> page.<br>
		</p>
		<div class="upload_new_student_csv_container" id="upload_new_student_csv_container1">
			<div class="new_student_csv_col" id="left_new_student_csv_col">
				<label class="new_student_csv_choose_file_button" id="new_student_csv_choose_file_button">
					<input type="file" id="new_student_csv_file_input" accept=".txt, .csv" onchange="handleNewStudentCSVChooseFile()"/>
						Choose File
				</label>
			</div>
			<div class="new_student_csv_col" id="new_student_csv_file_name_col">
				<span id="new_student_csv_file_name">No file chosen</span>
			</div>
			<div class="new_student_csv_col" id="new_student_csv_midspace_col">
			
			</div>
			<div class="new_student_csv_col" id="new_student_csv_upload_col">
				<div class="new_student_csv_upload_button" id="new_student_csv_upload_button" onclick="handleNewStudentCSVUpload()">
					Upload
				</div>
			</div>
		</div>
		<div class="upload_new_student_csv_container" id="upload_new_student_csv_container2">
			<div class="new_student_csv_col" id="new_student_csv_feedback_col">
					
				</div>
		</div>
	</div>
</section>



<!-- Roster Removal Tab -->
<section id="removeStudent" class="tab-content">
	<div class="account-container">
		<h2>Manually Remove Student from Roster</h2>
		<h4>All fields are required.</h4>
		<div class="rs-input-master-container">
			<form class="rs-form" id="student_removal_form">
				<!-- Student ID Number -->
				<div class="rs-input-container" id="rs_stuid_prompt">
					Student ID:
				</div>
				<div class="rs-input-container" id="rs_stuid_container">
					<input type="text" id="removal_id_num" name="removal_id_num" required>
				</div>
				<!-- Student First Name -->
				<div class="rs-input-container" id="rs_firstname_prompt">
					First Name:
				</div>
				<div class="rs-input-container" id="rs_firstname_container">
					<input type="text" id="removal_first_name" name="removal_first_name" required>
				</div>
				<!-- Student Last Name -->
				<div class="rs-input-container" id="rs_lastname_prompt">
					Last Name:
				</div>
				<div class="rs-input-container" id="rs_lastname_container">
					<input type="text" id="removal_last_name" name="removal_last_name" required>
				</div>
				<!-- Department Dropdown -->
				<div class="rs-input-container" id="rs_dept_prompt">
					Select a Department:
				</div>
				<div class="rs-input-container" id="rs_dept_dropdown_container">
					<select id="remove_student_department_dropdown" name="options" required>
						<option value="none">Any</option>
					</select>
				</div>
				<!-- Semester Dropdown -->
				<div class="rs-input-container" id="rs_sem_prompt">
					Select a Semester:
				</div>
				<div class="rs-input-container" id="rs_sem_dropdown_container">
					<select id="remove_student_semester_dropdown" name="options">
							<option value="none">Any</option>
					</select>
				</div>
				<!-- Course Dropdown -->
				<div class="rs-input-container" id="rs_course_propt">
					Select a Course:
				</div>
				<div class="rs-input-container" id="rs_course_dropdown_container">
					<select id="remove_student_courses_dropdown" name="options" required>
							<option value="none">Any</option>
					</select>
				</div>
				<!-- Submit Button -->
				<div class="rs-input-container" id="rs_submit_button">
					<input type="submit" value="Submit" onclick="removeStudentFromRoster(event)">
				</div>
				<!-- Clear Button -->
				<div class="rs-input-container" id="rs_clear_button">
					<input type="reset" value="Clear">
				</div>
			</form>
		</div>
		<div class="manual_submission_feedback_container" id="remove_student_manual_submission_feedback_container">
			
		</div>
		<h2>Upload Student Removals from Rosters</h2>
		<p>
			Upload a .txt or .csv file containing student information. More info on the <a href="javascript:void(0);" onclick="openTab('helpTab')"><i>Help</i></a> page.<br>
		</p>
		<div class="upload_remove_student_csv_container" id="upload_remove_student_csv_container1">
			<div class="remove_student_csv_col" id="left_remove_student_csv_col">
				<label class="remove_student_csv_choose_file_button" id="remove_student_csv_choose_file_button">
					<input type="file" id="remove_student_csv_file_input" accept=".txt, .csv" onchange="handleRemoveStudentCSVChooseFile()"/>
						Choose File
				</label>
			</div>
			<div class="remove_student_csv_col" id="remove_student_csv_file_name_col">
				<span id="remove_student_csv_file_name">No file chosen</span>
			</div>
			<div class="remove_student_csv_col" id="remove_student_csv_midspace_col">
			
			</div>
			<div class="remove_student_csv_col" id="remove_student_csv_upload_col">
				<div class="remove_student_csv_upload_button" id="remove_student_csv_upload_button" onclick="handleRemoveStudentCSVUpload()">
					Upload
				</div>
			</div>
		</div>
		<div class="upload_remove_student_csv_container" id="upload_remove_student_csv_container2">
			<div class="remove_student_csv_col" id="remove_student_csv_feedback_col">
					
				</div>
		</div>
	</div>
</section>





		<section id="helpTab" class="tab-content">
			<h2> Help / FAQs: </h2>
			<div class="questions-container">
				<div class="question">
					<button>
						<span>Where can I see my classes and their attendance data?</span>
						<i class="fas fa-chevron-down d-arrow"></i>
					</button>
					<p class="answer">
						Go to the "Classes" tab, and fill in the fields, and press submit. You will be able to download a csv file and view the data on the site.
					</p>
				</div>
				<div class="question">
					<button>
						<span>How do I log out? </span>
						<i class="fas fa-chevron-down d-arrow"></i>
					</button>
					<p class="answer">
						Click on the -> To the door in the top right of your screen. 
					</p>
				</div>
				<div class="question">
					<button>
						<span>How can I change/update my password? </span>
						<i class="fas fa-chevron-down d-arrow"></i>
					</button>
					<p class="answer">
						Go to the "Account Info" tab. Click Update Password, where you will be taken to a web page to update it. 
					</p>
				</div>
				<div class="question">
					<button>
						<span>How can I verify my students' attendance if they forgot their ID?</span>
						<i class="fas fa-chevron-down d-arrow"></i>
					</button>
					<p class="answer">
						Tell them to submit an attendance verification request on the homepage. Then you will see it on your "Notifications" tab and be able to approve or deny the request. You can also edit the table yourself.
					</p>
				</div>
			</div>
		</section>

		<section id="accountTab" class="tab-content">
			<div class="account-container">
				<h2> View your Account Information: </h2>
				<h4> Your Email: </h4>
					<p> If your email is changing, please contact our admin at
					 <a href="mailto:admin@madzattendance.org?subject=Email Change">admin@madzattendance.org</a></p>
				<!-- Load in email --> 
				<h4>Your Department: </h4>
				<!-- Load in dept --> 
				<h4>Class History: </h4>
				<!-- Load in all classes taught --> 
        			<button id="resetPasswordButton" onclick="location.href='updatePassword.html'">Update Password</button>
				<!-- Add reset password implementation --> 
			</div>
		</section>

		<section id="notificationTab" class="tab-content">
			<div class="account-container">
				<h2>View Your Notifications:</h2>
				<div id="notifications-container"></div> <!-- This is where notifications will be appended -->
			<div id="message-container"></div>
			</div>
		</section>
	
    </main>
	
    <footer>
    <p><small>&copy; 2024 MADZ Attendance</small></p>
    </footer>
<script src="professorHome.js"></script>
</body>
</html>


<!-- https://web.dev/learn/html/tables/#:~:text=If%20data%20is%20being%20presented%2C%20compared%2C%20sorted%2C%20calculated%2C,of%20images%20and%20style%20the%20grid%20with%20CSS.  -->


<!-- <div>
	<label for="department_dropdown">Select a Department:<span class="required"></span></label>
	<select id="department_dropdown" name="options">
	<option value="any">Any</option>
	</select>
</div> -->
<!-- <div>
	<label for="courses_dropdown">Select a Course:<span class="required"></span></label>
	<select id="courses_dropdown" name="options">
	<option value="none"></option>
	</select>
</div> -->
				<!-- Zaynin Sept 26 (END) -->
            
				<!-- Date Fields (Hidden Initially) -->
<!-- <div id="date-fields">
	<div>
		<label for="start_date">Start Date:<span class="required"></span></label>
		<input type="date" id="start_date" name="start_date">
		</div>
		<div>
		<label for="end_date">End Date:<span class="required"></span></label>
		<input type="date" id="end_date" name="end_date">
		</div>
</div> -->
<!-- <button id="download_csv">Download CSV</button> -->
